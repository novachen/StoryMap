<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">

    <title>中国土司遗产</title>

    <script src="js/jquery.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="css/ol.css" type="text/css">
    <script src="js/ol.js"></script>

    <link href="css/offcanvas.css" rel="stylesheet">


    <style>
        .marker {
            width: 20px;
            height: 20px;
            border: 1px solid #088;
            border-radius: 10px;
            background-color: #0FF;
            opacity: 0.5;
        }

        .city {
            text-decoration: none;
            color: white;
            font-size: 11pt;
            font-weight: bold;
            text-shadow: black 0.1em 0.1em 0.2em;
        }

        .popover-content {
            min-width: 180px;
        }

        .map {
            height: 100%;
            width: 100%;
        }

        .ah {
            height: 100%;
        }

        .scrolly {
            overflow-y: auto;
        }

        .normalcss {
            background: #AAA;
        }

        .clickcss {
            background: #EEE;
        }

    </style>
</head>
<body>

<div class="row ah">
    <div class="col-md-6 ah scrolly">
        <div class="col-md-12">
            <div class="row normalcss">
                <h1>明清皇家陵寝</h1>

                <p>明清皇家陵寝是中国明、清两朝皇帝悉心规划营建的文物建筑，体现了中国封建社会的最高丧葬制度和千百年封建社会的宇宙观、生死观、道德观和习俗，也体现了当时中国最高水平的规划思想和建筑艺术，陵寝分布于北京、河北、辽宁、安徽、江苏、湖北等地，主要建筑保存完整，反映了明清皇家陵寝原貌。现保存完好的是明皇家陵寝有：明皇陵、明孝陵、明祖陵、明十三陵
                    、明显陵 。清皇家陵寝有：清永陵、清福陵、清昭陵、清东陵和清西陵。</p>

                <p>2000年被列入《世界文化遗产名录》。</p>

                <p>2003年7月，明十三陵和明孝陵作为明清皇家陵寝的一部分收入《世界遗产名录》。</p>

                <p>2004年7月1日，盛京三陵 作为明清皇家陵寝的扩展项目列入世界文化遗产。 </p>

                <p>世界遗产委员会评价明清皇家陵寝依照风水理论，精心选址，将数量众多的建筑物巧妙地安置于地下。它是人类改变自然的产物，体现了传统的建筑和装饰思想，阐释了封建中国持续五百余年的世界观与权力观。</p>

                <p>(这也是和地图一起讲故事(StoryMap)的一个例子，你可以点击文章的任意位置来驱动地图移动，也可以点击地图上的图标来驱动文章重定位)</p>
            </div>
            <div class="row">
                <div onclick="showMap(this);changecss(this);" class="normalcss" id="tan-ya">
                    <h2>唐崖土司城</h2>
				    <p></p>
                    <img src=""/><br/>
                </div>
                <div onclick="showMap(this);changecss(this);" class="normalcss" id="yong-shun">
                    <h2>永顺老司城</h2>
				    <p></p>
                    <img src=""/><br/>
                </div>
                <div onclick="showMap(this);changecss(this);" class="normalcss" id="hai-long-tun">
                    <h2>海龙囤</h2>
				    <p></p>
                    <img src=""/><br/>
                </div>
            </div>
            <!--/row-->
        </div>
        <!--/.col-xs-12.col-sm-9-->
    </div>
    <div class="col-md-6 ah">
        <div id="map" class="map">
            <div id="popup"></div>
        </div>
    </div>

    <div style="display: none;" id="mapinfo">
    </div>

</div>
<script type="text/javascript">
    var fields = "唐崖土司城,tan-ya,109.048554,29.70025;永顺老司城,yong-shun,109.946327,29.018791;海龙囤,hai-long-tun,106.8169,27.8117";

    var view = new ol.View({
        center: ol.proj.fromLonLat([116.405,39.901]),
        zoom: 6,
        minZoom: 3,
        maxZoom: 19
    })

    tileLayer = new ol.layer.Tile({
        source: new ol.source.BingMaps({
            imagerySet: 'Aerial',
            key: 'At0WXMn2L_sQg7zsC2cCY66Hk6wuAOOZF0CIibapqGOj7TZ_rkiP-BGBNQMDYgg4'
        })
    });

    var map = new ol.Map({
        layers: [
            tileLayer
        ],
        target: 'map',
        view: view
    });

    function changecss(obj) {
        var d = document.getElementsByClassName('clickcss');
        for (var i = 0; i < d.length; i++) {
            d[i].className = "normalcss";
        }
        obj.className = "clickcss";
    }

    var maphtml = "";
    var s1 = fields.split(";");
    for (var i = 1; i <= s1.length; i++) {
        var s2 = s1[i - 1].split(",");
        maphtml += "<a class=\"overlay city\" id=\"city" + i + "\" href=\"#" + s2[1] + "\">" + s2[0] + "</a><div class=\"marker\" id=\"marker" + i + "\" title=\"Marker\"></div>";
    }
    document.getElementById("mapinfo").innerHTML = maphtml;

    for (var i = 1; i <= s1.length; i++) {
        var s2 = s1[i - 1].split(",");
        var a = new Array(parseFloat(s2[2]), parseFloat(s2[3]));
        var pos = ol.proj.fromLonLat(a);
        var marker = new ol.Overlay({
            position: pos,
            positioning: 'center-center',
            element: document.getElementById('marker' + i),
            stopEvent: false
        });
        map.addOverlay(marker);
        var city = new ol.Overlay({
            position: pos,
            element: document.getElementById('city' + i)
        });
        map.addOverlay(city);
    }
    size = map.getSize();
    half = [size[0] / 2, size[1] / 2];
    function showMap(obj) {
        var pointName = obj.id;
        for (var i = 1; i <= s1.length; i++) {
            var s2 = s1[i - 1].split(",");
            if (pointName == s2[1]) {
                //alert(pointName + "*****" + s2[1] + "*****" + s2[2] + "*****" + s2[3]);
                view.setCenter(ol.proj.fromLonLat([parseFloat(s2[2]), parseFloat(s2[3])]));
                view.setZoom(15);
            }
        }
    }
</script>
</body>
</html>